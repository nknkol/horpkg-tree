# Tree Package Recipe for Horpkg

[package]
name = "tree"
version = "2.2.1"
description = "Recursive directory listing command"
category = "utilities"
license = "GPL-2.0"
homepage = "https://mama.indstate.edu/users/ice/tree/"
mode = "binary-only"

[maintainer]
name = "nknkol" # <-- 已更新为您的 GitHub 用户名
email = "repo@horpkg.org" # 您可以替换为自己的邮箱

[dependencies]
runtime = ["horpkg-base >= 1.0.0"]
build = ["gcc", "make"]

[source]
type = "tarball"
url = "https://github.com/Old-Man-Programmer/tree/archive/refs/tags/2.2.1.tar.gz" # <-- 已更新为 2.2.1 的源码 URL
sha256 = "b6bce0b533b664724218658823f4c02952011b06c116c21e42b2b1158a141b71" # <-- 已更新为 2.2.1 的源码 SHA256
size = 75753

[build]
# Build script
script = """
# Extract
tar xzf 2.2.1.tar.gz
cd tree-2.2.1

# Apply HarmonyOS patches if needed
# patch -p1 < ../patches/0001-harmonyos-support.patch

# Build
make CC=$CC \
     CFLAGS="$CFLAGS -DLINUX" \
     LDFLAGS="$LDFLAGS"

# Install
make install \
     DESTDIR=$PKGDIR/usr/bin \
     MANDIR=$PKGDIR/usr/share/man
"""

# Compilation flags
cflags = "-O2 -Wall"
ldflags = "-s"

[install]
# Install type
hnp_type = "public"

# Files to include
files = [
    "usr/bin/bin/tree",
    "usr/share/man/man1/tree.1"
]

# Provided commands
commands = ["tree"]
man_pages = ["tree.1"]

[metadata]
# Package tags
tags = ["cli", "filesystem", "utility", "directory"]

# Examples
examples = [
    "tree",
    "tree -L 2",
    "tree -d",
    "tree -C"
]